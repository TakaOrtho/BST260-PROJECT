---
title: "Takahisa_260final"
author: "Takahisa Ogawa"
date: "12/5/2019"
output: html_document
---

```{r data extraction}
library(tidyverse)
library(readr)
EucDistHp <- read_csv("EucDistHp.csv", col_types = cols(OBJECTID = col_skip()))
inj_join <- read_csv("D:/Dropbox/HARVARD MPH/BST/BST260/BST260-PROJECT7/inj_join.csv",col_types = cols(XCoord = col_skip(),  YCoord = col_skip()))
source("data_source.R")
rm(datad,dataf,dataa,datas,datax,dataq)
```


```{r}
EucDistHp <- rename(EucDistHp,ZIP=ZCTA5CE10)
EucDistHp$ZIP <- as.numeric(as.character(EucDistHp$ZIP))
inj_join <- rename(inj_join,ZIP=ZIP_1)
inj_join$ZIP <- as.numeric(as.character(inj_join$ZIP))
data <- rename(data,ZIPpre=ZIP)

data<-data%>%left_join(inj_join,by='ID')
data<-data%>%left_join(EucDistHp ,by='ZIP')
```




```{r mapping}
library(leaflet)

map <- data %>% filter(NATURETITLE=='Fractures') 
leaflet() %>% 
  setView(-95, 40, zoom= 3.5) %>% 
  addCircles(data = map, lat= ~as.numeric(LATITUDE), lng = ~as.numeric(LONGITUDE),
             weight = 0.4, color="BLUE", stroke = TRUE, fillOpacity = 1) %>%
  addProviderTiles(providers$CartoDB.Positron, group = "Standard") %>%    addScaleBar()

```




